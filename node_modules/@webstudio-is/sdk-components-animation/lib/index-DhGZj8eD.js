//! SPDX-License-Identifier: LicenseRef-Webstudio,Inc-Proprietary
"use strict";var vn=Object.defineProperty,wn=(t,e,n)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e,n)=>wn(t,typeof e!="symbol"?e+"":e,n);class p{}class be extends p{constructor(e){super(),d(this,"value"),this.value=e}}class ye extends p{constructor(e){super(),d(this,"value"),this.value=e}}class xn extends p{constructor(e){super(),d(this,"value"),this.value=e}}class Cn extends p{constructor(e,n="unrestricted"){super(),d(this,"type"),d(this,"value"),this.value=e,this.type=n}}class bn extends p{constructor(e){super(),d(this,"value"),this.value=e}}class kn extends p{}class Pn extends p{constructor(e){super(),d(this,"value"),this.value=e}}class ue extends p{}class x extends p{constructor(e){super(),d(this,"value"),this.value=e}}class G extends p{constructor(e,n="integer"){super(),d(this,"value"),d(this,"type"),this.value=e,this.type=n}}class oe extends p{constructor(e){super(),d(this,"value"),this.value=e}}class _ extends p{constructor(e,n,i){super(),d(this,"value"),d(this,"type"),d(this,"unit"),this.value=e,this.type=n,this.unit=i}}class X extends p{}class En extends p{}class Rn extends p{}class Mn extends p{}class An extends p{}class Xe extends p{}class ke extends p{}class Ke extends p{}class b extends p{}class K extends p{}class Pe extends p{}class Qe extends p{}class Vn{constructor(e){d(this,"input"),d(this,"index",0),this.input=e}consume(){const e=this.input.codePointAt(this.index);return typeof e<"u"&&(this.index+=String.fromCodePoint(e).length),e}reconsume(e){typeof e<"u"&&(this.index-=String.fromCodePoint(e).length)}peek(){const e=[];let n=this.index;for(let i=0;i<3&&n<this.input.length;i++){const r=this.input.codePointAt(n);e.push(r),n+=String.fromCodePoint(r).length}return e}}function Ee(t){return t===10}function M(t){return Ee(t)||t===8192||t===32}function w(t){return t>=48&&t<=57}function De(t){return w(t)||t>=65&&t<=70||t>=97&&t<=102}function Un(t){return t>=65&&t<=90}function In(t){return t>=97&&t<=122}function Nn(t){return Un(t)||In(t)}function On(t){return t>=128}function ee(t){return Nn(t)||On(t)||t===95}function Ye(t){return ee(t)||w(t)||t===45}function Dn(t){return t>=0&&t<=8||t===11||t>=14&&t<=31||t===127}function O(t,e){return t===92&&!Ee(e)}function Z(t,e,n){return t===45?ee(e)||e===45||O(e,n):ee(t)?!0:t===92?O(t,e):!1}function ce(t,e,n){return t===43||t===45?w(e)||e===46&&w(n):w(t===46?e:t)}function ae(t){const e=t.consume();if(De(e)){let n=[e];for(;De(...t.peek())&&n.length<5;)n.push(t.consume());M(...t.peek())&&t.consume();const i=parseInt(String.fromCodePoint(...n),16);return i===0||i>1114111?65533:i}else return typeof e>"u"?65533:e}function ze(t,e){const n=new bn("");for(;;){const i=t.consume();if(i===e||typeof i>"u")return n;if(i===10)return t.reconsume(i),new kn;if(i===92){const r=t.peek()[0];typeof r>"u"||(Ee(r)?t.consume():n.value+=String.fromCodePoint(ae(t)))}else n.value+=String.fromCodePoint(i)}}function ne(t){let e="";for(;;){const n=t.consume();if(Ye(n))e+=String.fromCodePoint(n);else if(O(...t.peek()))e+=String.fromCodePoint(ae(t));else return t.reconsume(n),e}}function zn(t){let e="integer",n="";for([43,45].includes(t.peek()[0])&&(n+=String.fromCodePoint(t.consume()));w(...t.peek());)n+=String.fromCodePoint(t.consume());if(t.peek()[0]===46&&w(t.peek()[1]))for(n+=String.fromCodePoint(t.consume(),t.consume()),e="number";w(...t.peek());)n+=String.fromCodePoint(t.consume());return[69,101].includes(t.peek()[0])&&([45,43].includes(t.peek()[1])&&w(t.peek()[2])?(n+=String.fromCodePoint(t.consume(),t.consume(),t.consume()),e="number"):w(t.peek()[1])&&(n+=String.fromCodePoint(t.consume(),t.consume()),e="number")),{value:parseFloat(n),type:e}}function J(t){let e=zn(t);return Z(...t.peek())?new _(e.value,e.type,ne(t)):t.peek()[0]===37?(t.consume(),new oe(e.value)):new G(e.value,e.type)}function fe(t){for(;;){const e=t.consume();if(e===41||typeof e>"u")return;O(...t.peek())&&ae(t)}}function Ln(t){const e=new Pn("");for(;M(...t.peek());)t.consume();for(;;){const n=t.consume();if(n===41||typeof n>"u")return e;if(M(n)){for(;M(...t.peek());)t.consume();return t.peek()[0]===41||typeof t.peek()[0]>"u"?(t.consume(),e):(fe(t),new ue)}else{if([34,39,40].includes(n)||Dn(n))return fe(t),new ue;if(n===92)if(O(...t.peek()))e.value+=ae(t);else return fe(t),new ue;else e.value+=String.fromCodePoint(n)}}}function me(t){const e=ne(t);if(e.match(/url/i)&&t.peek()[0]===40){for(t.consume();M(t.peek()[0])&&M(t.peek()[1]);)t.consume();return[34,39].includes(t.peek()[0])||M(t.peek()[0])&&[34,39].includes(t.peek()[1])?new ye(e):Ln(t)}else return t.peek()[0]===40?(t.consume(),new ye(e)):new be(e)}function Wn(t){const e=t.consume(),n=t.peek();if(M(e)){for(;M(...t.peek());)t.consume();return new X}else{if(e===34)return ze(t,e);if(e===35)if(Ye(n[0])||O(...n)){const i=new Cn;return Z(...n)&&(i.type="id"),i.value=ne(t),i}else return new x(String.fromCodePoint(e));else return e===39?ze(t,e):e===40?new b:e===41?new K:e===43?ce(...n)?(t.reconsume(e),J(t)):new x(String.fromCodePoint(e)):e===44?new Xe:e===45?ce(...t.peek())?(t.reconsume(e),J(t)):t.peek()[0]===45&&t.peek()[1]===62?(t.consume(),t.consume(),new Rn):Z(...t.peek())?(t.reconsume(e),me(t)):new x(String.fromCodePoint(e)):e===46?ce(...t.peek())?(t.reconsume(e),J(t)):new x(String.fromCodePoint(e)):e===58?new Mn:e===59?new An:e===60?n[0]===33&&n[1]===45&&n[2]===45?(t.consume(),t.consume(),t.consume(),new En):new x(String.fromCodePoint(e)):e===64?Z(...n)?new xn(ne(t)):new x(String.fromCodePoint(e)):e===91?new ke:e===92?O(...n)?(t.reconsume(e),me(t)):new x(String.fromCodePoint(e)):e===93?new Ke:e===123?new Pe:e===125?new Qe:w(e)?(t.reconsume(e),J(t)):ee(e)?(t.reconsume(e),me(t)):typeof e>"u"?void 0:new x(String.fromCodePoint(e))}}function Hn(t){const e=new Vn(t),n=[];for(;;){const i=Wn(e);if(typeof i>"u")return n;n.push(i)}}const jn=new Set(["px","deg","s","hz","dppx","number","fr"]);function pe(t){return jn.has(t.toLowerCase())}function Re(t){if(["x","y"].includes(t))return t;if(t==="block")t="y";else if(t==="inline")t="x";else throw new TypeError(`Invalid axis \u201C${t}\u201D`);return t}function Me(t){const e=[];let n=0;function i(){let o=0;const s=n;for(;n<t.length;){const a=t.slice(n,n+1);if(/\s/.test(a)&&o===0)break;if(a==="(")o+=1;else if(a===")"&&(o-=1,o===0)){n++;break}n++}return t.slice(s,n)}function r(){for(;/\s/.test(t.slice(n,n+1));)n++}for(;n<t.length;){const o=t.slice(n,n+1);/\s/.test(o)?r():e.push(i())}return e}function Le(t,e){return t.reduce((n,i)=>(n.has(i[e])?n.get(i[e]).push(i):n.set(i[e],[i]),n),new Map)}function We(t,e){const n=[],i=[];for(const r of t)e(r)?n.push(r):i.push(r);return[n,i]}function v(t,e={}){function n(r){return Array.from(r).map(o=>v(o,e))}if(t instanceof CSSUnitValue){if(t.unit==="percent"&&e.percentageReference){const o=t.value/100*e.percentageReference.value,s=e.percentageReference.unit;return new CSSUnitValue(o,s)}const r=t.toSum();if(r&&r.values.length===1&&(t=r.values[0]),t instanceof CSSUnitValue&&t.unit==="em"&&e.fontSize&&(t=new CSSUnitValue(t.value*e.fontSize.value,e.fontSize.unit)),t instanceof CSSKeywordValue){if(t.value==="e")return new CSSUnitValue(Math.E,"number");if(t.value==="pi")return new CSSUnitValue(Math.PI,"number")}return t}if(!t.operator)return t;switch(t.operator){case"sum":t=new CSSMathSum(...n(t.values));break;case"product":t=new CSSMathProduct(...n(t.values));break;case"negate":t=new CSSMathNegate(v(t.value,e));break;case"clamp":t=new CSSMathClamp(v(t.lower,e),v(t.value,e),v(t.upper,e));break;case"invert":t=new CSSMathInvert(v(t.value,e));break;case"min":t=new CSSMathMin(...n(t.values));break;case"max":t=new CSSMathMax(...n(t.values));break}if(t instanceof CSSMathMin||t instanceof CSSMathMax){const r=Array.from(t.values);if(r.every(o=>o instanceof CSSUnitValue&&o.unit!=="percent"&&pe(o.unit)&&o.unit===r[0].unit)){const o=Math[t.operator].apply(Math,r.map(({value:s})=>s));return new CSSUnitValue(o,r[0].unit)}}if(t instanceof CSSMathMin||t instanceof CSSMathMax){const r=Array.from(t.values),[o,s]=We(r,l=>l instanceof CSSUnitValue&&l.unit!=="percent"),a=Array.from(Le(o,"unit").values());if(a.some(l=>l.length>0)){const l=a.map(u=>{const f=Math[t.operator].apply(Math,u.map(({value:m})=>m));return new CSSUnitValue(f,u[0].unit)});t instanceof CSSMathMin?t=new CSSMathMin(...l,...s):t=new CSSMathMax(...l,...s)}return r.length===1?r[0]:t}if(t instanceof CSSMathNegate)return t.value instanceof CSSUnitValue?new CSSUnitValue(0-t.value.value,t.value.unit):t.value instanceof CSSMathNegate?t.value.value:t;if(t instanceof CSSMathInvert)return t.value instanceof CSSMathInvert?t.value.value:t;if(t instanceof CSSMathSum){let r=function(s){const a=s.filter(f=>f instanceof CSSUnitValue),l=s.filter(f=>!(f instanceof CSSUnitValue)),u=Array.from(Le(a,"unit").entries()).map(([f,m])=>{const g=m.reduce((D,{value:j})=>D+j,0);return new CSSUnitValue(g,f)});return[...l,...u]};var i=r;let o=[];for(const s of t.values)s instanceof CSSMathSum?o.push(...s.values):o.push(s);return o=r(o),o.length===1?o[0]:new CSSMathSum(...o)}if(t instanceof CSSMathProduct){let r=[];for(const a of t.values)a instanceof CSSMathProduct?r.push(...a.values):r.push(a);const[o,s]=We(r,a=>a instanceof CSSUnitValue&&a.unit==="number");if(o.length>1){const a=o.reduce((l,{value:u})=>l*u,1);r=[new CSSUnitValue(a,"number"),...s]}if(r.length===2){let a,l;for(const u of r)u instanceof CSSUnitValue&&u.unit==="number"?a=u:u instanceof CSSMathSum&&[...u.values].every(f=>f instanceof CSSUnitValue)&&(l=u);if(a&&l)return new CSSMathSum(...[...l.values].map(u=>new CSSUnitValue(u.value*a.value,u.unit)))}if(r.every(a=>a instanceof CSSUnitValue&&pe(a.unit)||a instanceof CSSMathInvert&&a.value instanceof CSSUnitValue&&pe(a.value.unit))){const a=new CSSMathProduct(...r).toSum();if(a&&a.values.length===1)return a.values[0]}return new CSSMathProduct(...r)}return t}const T=null,Je=["percent","length","angle","time","frequency","resolution","flex"],A={fontRelativeLengths:{units:new Set(["em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh"])},viewportRelativeLengths:{units:new Set(["vw","lvw","svw","dvw","vh","lvh","svh","dvh","vi","lvi","svi","dvi","vb","lvb","svb","dvb","vmin","lvmin","svmin","dvmin","vmax","lvmax","svmax","dvmax"])},absoluteLengths:{units:new Set(["cm","mm","Q","in","pt","pc","px"]),compatible:!0,canonicalUnit:"px",ratios:{cm:96/2.54,mm:96/2.54/10,Q:96/2.54/40,in:96,pc:96/6,pt:96/72,px:1}},angle:{units:new Set(["deg","grad","rad","turn"]),compatible:!0,canonicalUnit:"deg",ratios:{deg:1,grad:360/400,rad:180/Math.PI,turn:360}},time:{units:new Set(["s","ms"]),compatible:!0,canonicalUnit:"s",ratios:{s:1,ms:1/1e3}},frequency:{units:new Set(["hz","khz"]),compatible:!0,canonicalUnit:"hz",ratios:{hz:1,khz:1e3}},resolution:{units:new Set(["dpi","dpcm","dppx"]),compatible:!0,canonicalUnit:"dppx",ratios:{dpi:1/96,dpcm:2.54/96,dppx:1}}},Ze=new Map;for(const t of Object.values(A))if(t.compatible)for(const e of t.units)Ze.set(e,t);function Te(t){return Ze.get(t)}function Bn(t,e){const n={...t};for(const i of Object.keys(e))n[i]?n[i]+=e[i]:n[i]=e[i];return n}function Ae(t){return t==="number"?{}:t==="percent"?{percent:1}:A.absoluteLengths.units.has(t)||A.fontRelativeLengths.units.has(t)||A.viewportRelativeLengths.units.has(t)?{length:1}:A.angle.units.has(t)?{angle:1}:A.time.units.has(t)?{time:1}:A.frequency.units.has(t)?{frequency:1}:A.resolution.units.has(t)?{resolution:1}:t==="fr"?{flex:1}:T}function te(t){if(t instanceof CSSUnitValue){let{unit:e,value:n}=t;const i=Te(t.unit);return i&&e!==i.canonicalUnit&&(n*=i.ratios[e],e=i.canonicalUnit),e==="number"?[[n,{}]]:[[n,{[e]:1}]]}else if(t instanceof CSSMathInvert){if(!(t.value instanceof CSSUnitValue))throw new Error("Not implemented");const e=te(t.value);if(e===T||e.length>1)return T;const n=e[0],i={};for(const[r,o]of Object.entries(n[1]))i[r]=-1*o;return e[0]=[1/n[0],i],e}else if(t instanceof CSSMathProduct){let e=[[1,{}]];for(const n of t.values){const i=te(n),r=[];if(i===T)return T;for(const o of e)for(const s of i)r.push([o[0]*s[0],Bn(o[1],s[1])]);e=r}return e}else throw new Error("Not implemented")}function Fn(t,e){if(Ae(e)===T)throw new SyntaxError("The string did not match the expected pattern.");const n=te(t);if(!n)throw new TypeError;if(n.length>1)throw new TypeError("Sum has more than one item");const i=qn(en(n[0]),e);if(i===T)throw new TypeError;return i}function en(t){const[e,n]=t,i=Object.entries(n);if(i.length>1)return T;if(i.length===0)return new CSSUnitValue(e,"number");const r=i[0];return r[1]!==1?T:new CSSUnitValue(e,r[0])}function qn(t,e){const n=t.unit,i=t.value,r=Te(n),o=Te(e);return!o||r!==o?T:new CSSUnitValue(i*o.ratios[n]/o.ratios[e],e)}function He(t,...e){if(e&&e.length)throw new Error("Not implemented");const n=te(t).map(i=>en(i));if(n.some(i=>i===T))throw new TypeError("Type error");return new CSSMathSum(...n)}function $n(t){const e={};for(const n of Je)e[n]=-1*t[n];return e}function Gn(t,e){if(t.percentHint&&e.percentHint&&t.percentHint!==e.percentHint)return T;const n={...t,percentHint:t.percentHint??e.percentHint};for(const i of Je)e[i]&&(n[i]??(n[i]=0),n[i]+=e[i]);return n}class H{constructor(e,n){d(this,"name"),d(this,"values"),this.name=e,this.values=n}}class Ve{constructor(e,n){d(this,"value"),d(this,"associatedToken"),this.value=e,this.associatedToken=n}}function _n(t){if(Array.isArray(t))return t;if(typeof t=="string")return Hn(t);throw new TypeError(`Invalid input type ${typeof t}`)}function Xn(t,e){const n=new H(t.value,[]);for(;;){const i=e.shift();if(i instanceof K||typeof i>"u")return n;e.unshift(i),n.values.push(Ue(e))}}function Kn(t,e){let n;if(e instanceof Pe)n=Qe;else if(e instanceof b)n=K;else if(e instanceof ke)n=Ke;else return;const i=new Ve([],e);for(;;){const r=t.shift();if(r instanceof n||typeof r>"u")return i;t.unshift(r),i.value.push(Ue(t))}}function Ue(t){const e=t.shift();return e instanceof Pe||e instanceof ke||e instanceof b?Kn(t,e):e instanceof ye?Xn(e,t):e}function Qn(t){const e=_n(t);for(;e[0]instanceof X;)e.shift();if(typeof e[0]>"u")return null;const n=Ue(e);for(;e[0]instanceof X;)e.shift();return typeof e[0]>"u"?n:null}function je(t){if(t instanceof b||t instanceof K)return 6;if(t instanceof x)switch(t.value){case"*":return 4;case"/":return 4;case"+":return 2;case"-":return 2}}function B(t){return t[t.length-1]}function he(t,e,n){const i=["+","-"].includes(t.value)?"ADDITION":"MULTIPLICATION",r=e.type===i?e.values:[e],o=n.type===i?n.values:[n];return t.value==="-"?o[0]={type:"NEGATE",value:o[0]}:t.value==="/"&&(o[0]={type:"INVERT",value:o[0]}),{type:i,values:[...r,...o]}}function Yn(t){const e=[],n=[];for(;t.length;){const i=t.shift();if(i instanceof G||i instanceof _||i instanceof oe||i instanceof H||i instanceof Ve||i instanceof be)n.push(i);else if(i instanceof x&&["*","/","+","-"].includes(i.value)){for(;e.length&&!(B(e)instanceof b)&&je(B(e))>je(i);){const r=e.pop(),o=n.pop(),s=n.pop();n.push(he(r,s,o))}e.push(i)}else if(i instanceof b)e.push(i);else if(i instanceof K){if(!e.length)return null;for(;!(B(e)instanceof b);){const r=e.pop(),o=n.pop(),s=n.pop();n.push(he(r,s,o))}if(!(B(e)instanceof b))return null;e.pop()}else if(!(i instanceof X))return null}for(;e.length;){if(B(e)instanceof b)return null;const i=e.pop(),r=n.pop(),o=n.pop();n.push(he(i,o,r))}return n[0]}function F(t){if(t.type==="ADDITION")return new CSSMathSum(...t.values.map(e=>F(e)));if(t.type==="MULTIPLICATION")return new CSSMathProduct(...t.values.map(e=>F(e)));if(t.type==="NEGATE")return new CSSMathNegate(F(t.value));if(t.type==="INVERT")return new CSSMathInvert(F(t.value));if(t instanceof Ve)return Ie(new H("calc",t.value));if(t instanceof be){if(t.value==="e")return new CSSUnitValue(Math.E,"number");if(t.value==="pi")return new CSSUnitValue(Math.PI,"number");throw new SyntaxError("Invalid math expression")}else return nn(t)}function Ie(t){if(t.name==="min"||t.name==="max"){const r=t.values.filter(o=>!(o instanceof X||o instanceof Xe)).map(o=>v(Ie(new H("calc",o))));return t.name==="min"?new CSSMathMin(...r):new CSSMathMax(...r)}if(t.name!=="calc")return null;const e=Yn([...t.values]),n=F(e);let i;try{i=v(n)}catch{new CSSStyleSheet().insertRule("error",0)}return i instanceof CSSUnitValue?new CSSMathSum(i):i}function nn(t){if(t instanceof H&&["calc","min","max","clamp"].includes(t.name))return Ie(t);if(t instanceof G&&t.value===0&&!t.unit)return new CSSUnitValue(0,"px");if(t instanceof G)return new CSSUnitValue(t.value,"number");if(t instanceof oe)return new CSSUnitValue(t.value,"percent");if(t instanceof _)return new CSSUnitValue(t.value,t.unit)}function Jn(t){const e=Qn(t);return e===null&&new CSSStyleSheet().insertRule("error",0),e instanceof G||e instanceof oe||e instanceof _||e instanceof H||new CSSStyleSheet().insertRule("error",0),e instanceof _&&Ae(e.unit)===null&&new CSSStyleSheet().insertRule("error",0),nn(e)}function Zn(){let t=new WeakMap;function e(a){switch(a){case"percent":return"%";case"number":return"";default:return a.toLowerCase()}}function n(a){return typeof a=="number"?new CSSUnitValue(a,"number"):a}function i(a){const l=[];for(let u=0;u<a.length;u++)l[u]=n(a[u]);return l}class r{static parse(l){return l instanceof r?l:v(Jn(l),{})}}class o extends r{constructor(l,u,f,m){super(),t.set(this,{values:i(l),operator:u,name:f||u,delimiter:m||", "})}get operator(){return t.get(this).operator}get values(){return t.get(this).values}toString(){const l=t.get(this);return`${l.name}(${l.values.join(l.delimiter)})`}}const s={CSSNumericValue:r,CSSMathValue:o,CSSUnitValue:class extends r{constructor(a,l){super(),t.set(this,{value:a,unit:l})}get value(){return t.get(this).value}set value(a){t.get(this).value=a}get unit(){return t.get(this).unit}to(a){return Fn(this,a)}toSum(...a){return He(this,...a)}type(){const a=t.get(this);return Ae(a.unit)}toString(){const a=t.get(this);return`${a.value}${e(a.unit)}`}},CSSKeywordValue:class{constructor(a){this.value=a}toString(){return this.value.toString()}},CSSMathSum:class extends o{constructor(a){super(arguments,"sum","calc"," + ")}},CSSMathProduct:class extends o{constructor(a){super(arguments,"product","calc"," * ")}toSum(...a){return He(this,...a)}type(){return t.get(this).values.map(a=>a.type()).reduce(Gn)}},CSSMathNegate:class extends o{constructor(a){super([arguments[0]],"negate","-")}get value(){return t.get(this).values[0]}type(){return this.value.type()}},CSSMathInvert:class extends o{constructor(a){super([1,arguments[0]],"invert","calc"," / ")}get value(){return t.get(this).values[1]}type(){const a=t.get(this);return $n(a.values[1].type())}},CSSMathMax:class extends o{constructor(){super(arguments,"max")}},CSSMathMin:class extends o{constructor(){super(arguments,"min")}}};if(!window.CSS&&!Reflect.defineProperty(window,"CSS",{value:{}}))throw Error("Error installing CSSOM support");window.CSSUnitValue||["number","percent","em","ex","px","cm","mm","in","pt","pc","Q","vw","vh","vmin","vmax","rems","ch","deg","rad","grad","turn","ms","s","Hz","kHz","dppx","dpi","dpcm","fr"].forEach(a=>{if(!Reflect.defineProperty(CSS,a,{value:l=>new CSSUnitValue(l,a)}))throw Error(`Error installing CSS.${a}`)});for(let[a,l]of Object.entries(s))if(!(a in window)&&!Reflect.defineProperty(window,a,{value:l}))throw Error(`Error installing CSSOM support for ${a}`)}Zn();const Be="block";let S=new WeakMap,R=new WeakMap;const ve=["entry","exit","cover","contain","entry-crossing","exit-crossing"];function Fe(t){return t===document.scrollingElement?document:t}function N(t){let e=S.get(t).animations;if(e.length===0)return;let n=t.currentTime;for(let i=0;i<e.length;i++)e[i].tickAnimation(n)}function tn(t,e){if(!t)return null;const n=R.get(t).sourceMeasurements;let i=n.scrollTop;return Re(e)==="x"&&(i=Math.abs(n.scrollLeft)),i}function et(t,e){const n=R.get(t).sourceMeasurements;if(e==="block"?e="y":e==="inline"&&(e="x"),e==="y")return n.scrollHeight-n.clientHeight;if(e==="x")return n.scrollWidth-n.clientWidth}function Ne(t,e){const n=v(t,e);if(n instanceof CSSUnitValue){if(n.unit==="px")return n.value;throw TypeError("Unhandled unit type "+n.unit)}else throw TypeError("Unsupported value type: "+typeof t)}function nt(t){if(!(t instanceof Q)){tt(t);return}const e=t.subject;if(!e){z(t,null);return}if(getComputedStyle(e).display=="none"){z(t,null);return}const n=an(e);z(t,n)}function tt(t){const e=S.get(t);if(!e.anonymousSource)return;const n=rt(e.anonymousSource,e.anonymousTarget);z(t,n)}function qe(t){return["block","inline","x","y"].includes(t)}function it(t){let e=0,n;return()=>{const i=Date.now();return i-e<5||(n=t(),e=i),n}}function rn(t){const e=getComputedStyle(t),n=t.clientHeight,i=it(()=>document.scrollingElement===t?window.innerHeight:n);return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,clientWidth:t.clientWidth,get clientHeight(){return i()},writingMode:e.writingMode,direction:e.direction,scrollPaddingTop:e.scrollPaddingTop,scrollPaddingBottom:e.scrollPaddingBottom,scrollPaddingLeft:e.scrollPaddingLeft,scrollPaddingRight:e.scrollPaddingRight}}const $e=new WeakMap;function sn(t,e){if(!t||!e)return;let n=0,i=0,r=e;const o=t.offsetParent;for(;r&&r!=o;)i+=r.offsetLeft,n+=r.offsetTop,r=r.offsetParent;i-=t.offsetLeft+t.clientLeft,n-=t.offsetTop+t.clientTop;let s=$e.get(e);return s||(s=getComputedStyle(e).fontSize,$e.set(e,s)),{top:n,left:i,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight,fontSize:s}}function ie(t){let e=R.get(t);e.sourceMeasurements=rn(t);for(const n of e.timelineRefs){const i=n.deref();if(i instanceof Q){const r=S.get(i);r.subjectMeasurements=sn(t,i.subject)}}e.updateScheduled||(setTimeout(()=>{for(const n of e.timelineRefs){const i=n.deref();i&&N(i)}e.updateScheduled=!1}),e.updateScheduled=!0)}function z(t,e){const n=S.get(t),i=n.source;if(i!=e){if(i){const r=R.get(i);if(r){r.timelineRefs.delete(t);const o=Array.from(r.timelineRefs).filter(s=>typeof s.deref()>"u");for(const s of o)r.timelineRefs.delete(s);r.timelineRefs.size===0&&(r.disconnect(),R.delete(i))}}if(n.source=e,e){let r=R.get(e);if(!r){r={timelineRefs:new Set,sourceMeasurements:rn(e)},R.set(e,r);const o=new ResizeObserver(l=>{for(const u of l)ie(n.source)});o.observe(e);for(const l of e.children)o.observe(l);const s=new MutationObserver(l=>{for(const u of l)ie(u.target)});s.observe(e,{attributes:!0,attributeFilter:["style","class"]});const a=()=>{r.sourceMeasurements.scrollLeft=e.scrollLeft,r.sourceMeasurements.scrollTop=e.scrollTop;for(const l of r.timelineRefs){const u=l.deref();u&&N(u)}};Fe(e).addEventListener("scroll",a),r.disconnect=()=>{o.disconnect(),s.disconnect(),Fe(e).removeEventListener("scroll",a)}}r.timelineRefs.add(new WeakRef(t))}}}function de(t,e){let n=S.get(t).animations;for(let i=0;i<n.length;i++)n[i].animation==e&&n.splice(i,1)}function we(t,e,n){let i=S.get(t).animations;for(let r=0;r<i.length;r++)if(i[r].animation==e)return;i.push({animation:e,tickAnimation:n}),queueMicrotask(()=>{N(t)})}class y{constructor(e){S.set(this,{source:null,axis:Be,anonymousSource:e?e.anonymousSource:null,anonymousTarget:e?e.anonymousTarget:null,subject:null,inset:null,animations:[],subjectMeasurements:null});const n=e&&e.source!==void 0?e.source:document.scrollingElement;if(z(this,n),e&&e.axis!==void 0&&e.axis!=Be){if(!qe(e.axis))throw TypeError("Invalid axis");S.get(this).axis=e.axis}N(this)}set source(e){z(this,e),N(this)}get source(){return S.get(this).source}set axis(e){if(!qe(e))throw TypeError("Invalid axis");S.get(this).axis=e,N(this)}get axis(){return S.get(this).axis}get duration(){return CSS.percent(100)}get phase(){const e=this.source;if(!e)return"inactive";if(e===document.scrollingElement)return"active";let n=getComputedStyle(e);return n.display=="none"||e!=document.scrollingElement&&(n.overflow=="visible"||n.overflow=="clip")?"inactive":"active"}get currentTime(){const e=this.source;if(!e||!e.isConnected||this.phase=="inactive")return null;const n=getComputedStyle(e);if(n.display==="inline"||n.display==="none")return null;const i=this.axis,r=tn(e,i),o=et(e,i);return o>0?CSS.percent(100*r/o):CSS.percent(100)}get __polyfill(){return!0}}function ge(t,e){let n=t.parentElement;for(;n!=null;){if(e(n))return n;n=n.parentElement}}function rt(t,e){switch(t){case"root":return document.scrollingElement;case"nearest":return an(e);case"self":return e;default:throw new TypeError("Invalid ScrollTimeline Source Type.")}}function st(t){switch(getComputedStyle(t).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function on(t){const e=getComputedStyle(t);return e.transform!="none"||e.perspective!="none"||e.willChange=="transform"||e.willChange=="perspective"||e.filter!="none"||e.willChange=="filter"||e.backdropFilter!="none"}function ot(t){return getComputedStyle(t).position!="static"?!0:on(t)}function at(t){switch(getComputedStyle(t).position){case"static":case"relative":case"sticky":return ge(t,st);case"absolute":return ge(t,ot);case"fixed":return ge(t,on)}}function an(t){if(!(!t||!t.isConnected)){for(;t=at(t);){const e=getComputedStyle(t),n=["auto","scroll","hidden"];if(n.includes(e.overflowX)||n.includes(e.overflowY))return t===document.body&&document.scrollingElement!==null&&getComputedStyle(document.scrollingElement).overflow==="visible"?document.scrollingElement:t}return document.scrollingElement}}function q(t,e){const n=S.get(t),i=n.subjectMeasurements,r=R.get(n.source).sourceMeasurements;return t.phase==="inactive"||!(t instanceof Q)?null:lt(e,r,i,n.axis,n.inset)}function lt(t,e,n,i,r){const o=e.direction=="rtl"||e.writingMode=="vertical-rl";let s,a,l={fontSize:n.fontSize};Re(i)==="x"?(s=n.offsetWidth,a=n.left,l.scrollPadding=[e.scrollPaddingLeft,e.scrollPaddingRight],o&&(a+=e.scrollWidth-e.clientWidth,l.scrollPadding=[e.scrollPaddingRight,e.scrollPaddingLeft]),l.containerSize=e.clientWidth):(s=n.offsetHeight,a=n.top,l.scrollPadding=[e.scrollPaddingTop,e.scrollPaddingBottom],l.containerSize=e.clientHeight);const u=ct(r,l),f=a-l.containerSize+u.end,m=a+s-u.start,g=f+s,D=m-s,j=Math.min(g,D),Y=Math.max(g,D);let V,U;const Mt=l.containerSize-u.start-u.end,Et=s>Mt;switch(t){case"cover":V=f,U=m;break;case"contain":V=j,U=Y;break;case"entry":V=f,U=j;break;case"exit":V=Y,U=m;break;case"entry-crossing":V=f,U=Et?Y:j;break;case"exit-crossing":V=Et?j:Y,U=m;break}return{start:V,end:U}}function ut(t){const e={start:0,end:0};if(!t)return e;let n;if(typeof t=="string"?n=Me(t).map(i=>{if(i==="auto")return"auto";try{return CSSNumericValue.parse(i)}catch{throw TypeError(`Could not parse inset "${t}"`)}}):Array.isArray(t)?n=t:n=[t],n.length===0||n.length>2)throw TypeError("Invalid inset");for(const i of n){if(i==="auto")continue;const r=i.type();if(!(r.length===1||r.percent===1))throw TypeError("Invalid inset")}return{start:n[0],end:n[1]??n[0]}}function ct(t,e){const n={start:0,end:0};if(!t)return n;const[i,r]=[t.start,t.end].map((o,s)=>o==="auto"?e.scrollPadding[s]==="auto"?0:parseFloat(e.scrollPadding[s]):Ne(o,{percentageReference:CSS.px(e.containerSize),fontSize:CSS.px(parseFloat(e.fontSize))}));return{start:i,end:r}}function ln(t,e){if(t instanceof Q){const{rangeName:n,offset:i}=e,r=q(t,n),o=q(t,"cover");return ft(r,i,o,t.subject)}if(t instanceof y){const{axis:n,source:i}=t,{sourceMeasurements:r}=R.get(i);let o;return Re(n)==="x"?o=r.scrollWidth-r.clientWidth:o=r.scrollHeight-r.clientHeight,Ne(e,{percentageReference:CSS.px(o)})/o}unsupportedTimeline(t)}function ft(t,e,n,i){if(!t||!n)return 0;let r=getComputedStyle(i);const o={percentageReference:CSS.px(t.end-t.start),fontSize:CSS.px(parseFloat(r.fontSize))};return(Ne(e,o)+t.start-n.start)/(n.end-n.start)}let Q=class extends y{constructor(t){super(t);const e=S.get(this);e.subject=t&&t.subject?t.subject:void 0,t&&t.inset&&(e.inset=ut(t.inset)),e.subject&&(new ResizeObserver(()=>{ie(e.source)}).observe(e.subject),new MutationObserver(()=>{ie(e.source)}).observe(e.subject,{attributes:!0,attributeFilter:["class","style"]})),nt(this),e.subjectMeasurements=sn(e.source,e.subject),N(this)}get source(){return S.get(this).source}set source(t){throw new Error("Cannot set the source of a view timeline")}get subject(){return S.get(this).subject}get axis(){return S.get(this).axis}get currentTime(){const t=tn(this.source,this.axis);if(t==null)return null;const e=q(this,"cover");if(!e)return null;const n=(t-e.start)/(e.end-e.start);return CSS.percent(100*n)}get startOffset(){return CSS.px(q(this,"cover").start)}get endOffset(){return CSS.px(q(this,"cover").end)}};const mt=document.getAnimations,pt=window.Element.prototype.getAnimations,ht=window.Element.prototype.animate,Ge=window.Animation;class L{constructor(){this.state="pending",this.nativeResolve=this.nativeReject=null,this.promise=new Promise((e,n)=>{this.nativeResolve=e,this.nativeReject=n})}resolve(e){this.state="resolved",this.nativeResolve(e)}reject(e){this.state="rejected",this.promise.catch(()=>{}),this.nativeReject(e)}}function $(t){t.readyPromise=new L,requestAnimationFrame(()=>{var e;(((e=t.timeline)==null?void 0:e.currentTime)??null)!==null&&(re(t),t.pendingTask==="play"&&(t.startTime!==null||t.holdTime!==null)?cn(t):t.pendingTask==="pause"&&fn(t))})}function un(){return new DOMException("The user aborted a request","AbortError")}function I(t,e){if(e===null)return e;if(typeof e!="number")throw new DOMException(`Unexpected value: ${e}.  Cannot convert to CssNumberish`,"InvalidStateError");const n=t.rangeDuration??100,i=P(t),r=i?n*e/i:0;return CSS.percent(r)}function h(t,e){if(t.timeline){if(e===null)return e;if(e.unit==="percent"){const n=t.rangeDuration??100,i=P(t);return e.value*i/n}throw new DOMException("CSSNumericValue must be a percentage for progress based animations.","NotSupportedError")}else{if(e==null||typeof e=="number")return e;const n=e.to("ms");if(n)return n.value;throw new DOMException("CSSNumericValue must be either a number or a time value for time based animations.","InvalidStateError")}}function dt(t){const e=t.proxy.effect.getTiming();return t.normalizedTiming||e}function cn(t){const e=h(t,t.timeline.currentTime);if(t.holdTime!=null)C(t),t.animation.playbackRate==0?t.startTime=e:(t.startTime=e-t.holdTime/t.animation.playbackRate,t.holdTime=null);else if(t.startTime!==null&&t.pendingPlaybackRate!==null){const n=(e-t.startTime)*t.animation.playbackRate;C(t);const i=t.animation.playbackRate;i==0?(t.holdTime=null,t.startTime=e):t.startTime=e-n/i}t.readyPromise&&t.readyPromise.state=="pending"&&t.readyPromise.resolve(t.proxy),k(t,!1,!1),E(t),t.pendingTask=null}function fn(t){const e=h(t,t.timeline.currentTime);t.startTime!=null&&t.holdTime==null&&(t.holdTime=(e-t.startTime)*t.animation.playbackRate),C(t),t.startTime=null,t.readyPromise.resolve(t.proxy),k(t,!1,!1),E(t),t.pendingTask=null}function _e(t){if(!t.finishedPromise||t.finishedPromise.state!="pending"||t.proxy.playState!="finished")return;t.finishedPromise.resolve(t.proxy),t.animation.pause();const e=new CustomEvent("finish",{detail:{currentTime:t.proxy.currentTime,timelineTime:t.proxy.timeline.currentTime}});Object.defineProperty(e,"currentTime",{get:function(){return this.detail.currentTime}}),Object.defineProperty(e,"timelineTime",{get:function(){return this.detail.timelineTime}}),requestAnimationFrame(()=>{queueMicrotask(()=>{t.animation.dispatchEvent(e)})})}function W(t){return t.pendingPlaybackRate!==null?t.pendingPlaybackRate:t.animation.playbackRate}function C(t){t.pendingPlaybackRate!==null&&(t.animation.playbackRate=t.pendingPlaybackRate,t.pendingPlaybackRate=null)}function gt(t,e){if(e==null&&t.currentTime!==null)throw new TypeError;e=h(t,e),t.autoAlignStartTime=!1,t.holdTime!==null||t.startTime===null||t.timeline.phase==="inactive"||t.animation.playbackRate===0?t.holdTime=e:t.startTime=h(t,t.timeline.currentTime)-e/t.animation.playbackRate,t.timeline.phase==="inactive"&&(t.startTime=null),t.previousCurrentTime=null}function mn(t){if(!t.timeline)return null;const e=h(t,t.timeline.currentTime);if(e===null||t.startTime===null)return null;let n=(e-t.startTime)*t.animation.playbackRate;return n==-0&&(n=0),n}function St(t,e){if(!t.timeline)return null;const n=h(t,t.timeline.currentTime);return n==null?null:n-e/t.animation.playbackRate}function k(t,e,n){if(!t.timeline)return;let i=e?h(t,t.proxy.currentTime):mn(t);if(i&&t.startTime!=null&&!t.proxy.pending){const r=W(t),o=P(t);let s=t.previousCurrentTime;r>0&&i>=o&&t.previousCurrentTime!=null?((s===null||s<o)&&(s=o),t.holdTime=e?i:s):r<0&&i<=0?((s==null||s>0)&&(s=0),t.holdTime=e?i:s):r!=0&&(e&&t.holdTime!==null&&(t.startTime=St(t,t.holdTime)),t.holdTime=null)}E(t),t.previousCurrentTime=h(t,t.proxy.currentTime),t.proxy.playState=="finished"?(t.finishedPromise||(t.finishedPromise=new L),t.finishedPromise.state=="pending"&&(n?_e(t):Promise.resolve().then(()=>{_e(t)}))):(t.finishedPromise&&t.finishedPromise.state=="resolved"&&(t.finishedPromise=new L),t.animation.playState!="paused"&&t.animation.pause())}function P(t){const e=dt(t),n=e.delay+e.endDelay+e.iterations*e.duration;return Math.max(0,n)}function E(t){if(t.timeline)if(t.startTime!==null){const e=t.timeline.currentTime;if(e==null)return;const n=h(t,e);xe(t,(n-t.startTime)*t.animation.playbackRate)}else t.holdTime!==null&&xe(t,t.holdTime)}function xe(t,e){const n=t.timeline,i=t.animation.playbackRate,r=n.currentTime&&n.currentTime.value==(i<0?0:100)?i<0?.001:-.001:0;t.animation.currentTime=e+r}function yt(t){t.pendingTask&&(t.pendingTask=null,C(t),t.readyPromise.reject(un()),$(t),t.readyPromise.resolve(t.proxy))}function Se(t,e){if(!t.timeline)return;const n=t.proxy.playState=="paused"&&t.proxy.pending;let i=!1,r=h(t,t.proxy.currentTime);W(t)==0&&r==null&&(t.holdTime=0),r==null&&(t.autoAlignStartTime=!0),(t.proxy.playState==="finished"||n)&&(t.holdTime=null,t.startTime=null,t.autoAlignStartTime=!0),t.holdTime&&(t.startTime=null),t.pendingTask&&(t.pendingTask=null,i=!0),!(t.holdTime===null&&!t.autoAlignStartTime&&!n&&t.pendingPlaybackRate===null)&&(t.readyPromise&&!i&&(t.readyPromise=null),E(t),t.readyPromise||$(t),t.pendingTask="play",we(t.timeline,t.animation,Ce.bind(t.proxy)),k(t,!1,!1))}function Ce(t){const e=c.get(this);if(!e)return;if(t==null){e.proxy.playState!=="paused"&&e.animation.playState!="idle"&&e.animation.cancel();return}re(e),e.pendingTask&&requestAnimationFrame(()=>{e.pendingTask==="play"&&(e.startTime!==null||e.holdTime!==null)?cn(e):e.pendingTask==="pause"&&fn(e)});const n=this.playState;if(n=="running"||n=="finished"){const i=h(e,t);xe(e,(i-h(e,this.startTime))*this.playbackRate),k(e,!1,!1)}}function pn(t){t.specifiedTiming=null}function Tt(t){const e=t.animation.effect,n=e.updateTiming,i={get:function(l,u){const f=l[u];return typeof f=="function"?f.bind(e):f},set:function(l,u,f){return l[u]=f,!0}},r={apply:function(l){e.getTiming();const u=l.apply(e);if(t.timeline){const f=t.duration??100;u.localTime=I(t,u.localTime),u.endTime=I(t,u.endTime),u.activeDuration=I(t,u.activeDuration);const m=P(t),g=u.iterations?(m-u.delay-u.endDelay)/u.iterations:0;u.duration=m?CSS.percent(f*g/m):CSS.percent(0),t.timeline.currentTime===void 0&&(u.localTime=null)}return u}},o={apply:function(l,u){if(t.specifiedTiming)return t.specifiedTiming;t.specifiedTiming=l.apply(e);let f=Object.assign({},t.specifiedTiming),m;if(f.duration===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");return(f.duration===null||f.duration==="auto"||t.autoDurationEffect)&&t.timeline&&(t.autoDurationEffect=!0,f.delay=0,f.endDelay=0,m=f.iterations?1e5:0,f.duration=f.iterations?(m-f.delay-f.endDelay)/f.iterations:0,f.duration<0&&(f.duration=0,f.endDelay=m-f.delay),n.apply(e,[f])),t.normalizedTiming=f,t.specifiedTiming}},s={apply:function(l,u,f){if(!(!f||!f.length)){if(t.timeline&&f[0]){const m=f[0],g=m.duration;if(g===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");if(m.iterations===1/0)throw TypeError("Effect iterations cannot be Infinity when used with Scroll Timelines");typeof g<"u"&&g!=="auto"&&(t.autoDurationEffect=null)}t.specifiedTiming&&l.apply(e,[t.specifiedTiming]),l.apply(e,f),pn(t)}}},a=new Proxy(e,i);return a.getComputedTiming=new Proxy(e.getComputedTiming,r),a.getTiming=new Proxy(e.getTiming,o),a.updateTiming=new Proxy(e.updateTiming,s),a}function vt(t){if(!t.animationRange)return 0;const e=t.animationRange.start==="normal"?dn(t.timeline):t.animationRange.start;return ln(t.timeline,e)}function wt(t){if(!t.animationRange)return 0;const e=t.animationRange.end==="normal"?gn(t.timeline):t.animationRange.end;return 1-ln(t.timeline,e)}let c=new WeakMap;window.addEventListener("pagehide",t=>{c=new WeakMap},!1);let hn=new WeakMap;function re(t){if(!t.autoAlignStartTime||!t.timeline||!t.timeline.currentTime||t.proxy.playState==="idle"||t.proxy.playState==="paused"&&t.holdTime!==null)return;const e=t.rangeDuration;let n,i;try{n=CSS.percent(vt(t)*100)}catch(o){n=CSS.percent(0),t.animationRange.start="normal",console.warn("Exception when calculating start offset",o)}try{i=CSS.percent((1-wt(t))*100)}catch(o){i=CSS.percent(100),t.animationRange.end="normal",console.warn("Exception when calculating end offset",o)}t.rangeDuration=i.value-n.value||1e-4;const r=W(t);t.startTime=h(t,r>=0?n:i),t.holdTime=null,t.rangeDuration!==e&&pn(t)}function le(t){throw new Error("Unsupported timeline class")}function dn(t){if(t instanceof ViewTimeline)return{rangeName:"cover",offset:CSS.percent(0)};if(t instanceof y)return CSS.percent(0);le()}function gn(t){if(t instanceof ViewTimeline)return{rangeName:"cover",offset:CSS.percent(100)};if(t instanceof y)return CSS.percent(100);le()}function xt(t,e){if(!e)return{start:"normal",end:"normal"};const n={start:dn(t),end:gn(t)};if(t instanceof ViewTimeline){const i=Me(e),r=[],o=[];if(i.forEach(s=>{if(ve.includes(s))r.push(s);else try{o.push(CSSNumericValue.parse(s))}catch{throw TypeError(`Could not parse range "${e}"`)}}),r.length>2||o.length>2||o.length==1)throw TypeError("Invalid time range or unsupported time range format.");return r.length&&(n.start.rangeName=r[0],n.end.rangeName=r.length>1?r[1]:r[0]),o.length>1&&(n.start.offset=o[0],n.end.offset=o[1]),n}if(t instanceof y){const i=e.split(" ");if(i.length!=2)throw TypeError("Invalid time range or unsupported time range format.");return n.start=CSSNumericValue.parse(i[0]),n.end=CSSNumericValue.parse(i[1]),n}le()}function se(t,e,n){if(!e||e==="normal")return"normal";if(t instanceof ViewTimeline){let i="cover",r=n==="start"?CSS.percent(0):CSS.percent(100);if(e instanceof Object)e.rangeName!==void 0&&(i=e.rangeName),e.offset!==void 0&&(r=e.offset);else{const o=Me(e);o.length===1?ve.includes(o[0])?i=o[0]:r=v(CSSNumericValue.parse(o[0]),{}):o.length===2&&(i=o[0],r=v(CSSNumericValue.parse(o[1]),{}))}if(!ve.includes(i))throw TypeError("Invalid range name");return{rangeName:i,offset:r}}if(t instanceof y)return CSSNumericValue.parse(e);le()}class Sn{constructor(e,n,i={}){const r=n instanceof y,o=r?void 0:n,s=e instanceof Ge?e:new Ge(e,o);hn.set(s,this),c.set(this,{animation:s,timeline:r?n:void 0,playState:r?"idle":null,readyPromise:null,finishedPromise:null,startTime:null,holdTime:null,rangeDuration:null,previousCurrentTime:null,autoAlignStartTime:!1,pendingPlaybackRate:null,pendingTask:null,specifiedTiming:null,normalizedTiming:null,effect:null,animationRange:r?xt(n,i["animation-range"]):null,proxy:this})}get effect(){const e=c.get(this);return e.timeline?(e.effect||(e.effect=Tt(e)),e.effect):e.animation.effect}set effect(e){const n=c.get(this);n.animation.effect=e,n.effect=null,n.autoDurationEffect=null}get timeline(){const e=c.get(this);return e.timeline||e.animation.timeline}set timeline(e){const n=c.get(this),i=this.timeline;if(i==e)return;const r=this.playState,o=this.currentTime;let s=P(n),a;o===null?a=null:s===0?a=0:a=h(n,o)/s;const l=i instanceof y,u=e instanceof y,f=this.pending;if(l&&de(n.timeline,n.animation),u){n.timeline=e,C(n),n.autoAlignStartTime=!0,n.startTime=null,n.holdTime=null,(r==="running"||r==="finished")&&((!n.readyPromise||n.readyPromise.state==="resolved")&&$(n),n.pendingTask="play",we(n.timeline,n.animation,Ce.bind(this))),r==="paused"&&a!==null&&(n.holdTime=a*s),f&&((!n.readyPromise||n.readyPromise.state=="resolved")&&$(n),r=="paused"?n.pendingTask="pause":n.pendingTask="play"),n.startTime!==null&&(n.holdTime=null),k(n,!1,!1);return}if(n.animation.timeline==e){if(de(n.timeline,n.animation),n.timeline=null,l)switch(o!==null&&(n.animation.currentTime=a*P(n)),r){case"paused":n.animation.pause();break;case"running":case"finished":n.animation.play()}}else throw TypeError("Unsupported timeline: "+e)}get startTime(){const e=c.get(this);return e.timeline?I(e,e.startTime):e.animation.startTime}set startTime(e){const n=c.get(this);if(e=h(n,e),!n.timeline){n.animation.startTime=e;return}n.autoAlignStartTime=!1,h(n,n.timeline.currentTime)==null&&n.startTime!=null&&(n.holdTime=null,E(n));const i=h(n,this.currentTime);C(n),n.startTime=e,n.startTime!==null&&n.animation.playbackRate!=0?n.holdTime=null:n.holdTime=i,n.pendingTask&&(n.pendingTask=null,n.readyPromise.resolve(this)),k(n,!0,!1),E(n)}get currentTime(){const e=c.get(this);return e.timeline?e.holdTime!=null?I(e,e.holdTime):I(e,mn(e)):e.animation.currentTime}set currentTime(e){const n=c.get(this);if(!n.timeline){n.animation.currentTime=e;return}gt(n,e),n.pendingTask=="pause"&&(n.holdTime=h(n,e),C(n),n.startTime=null,n.pendingTask=null,n.readyPromise.resolve(this)),k(n,!0,!1)}get playbackRate(){return c.get(this).animation.playbackRate}set playbackRate(e){const n=c.get(this);if(!n.timeline){n.animation.playbackRate=e;return}n.pendingPlaybackRate=null;const i=this.currentTime;n.animation.playbackRate=e,i!==null&&(this.currentTime=i)}get playState(){const e=c.get(this);if(!e.timeline)return e.animation.playState;const n=h(e,this.currentTime);return n===null&&e.startTime===null&&e.pendingTask==null?"idle":e.pendingTask=="pause"||e.startTime===null&&e.pendingTask!="play"?"paused":n!=null&&(e.animation.playbackRate>0&&n>=P(e)||e.animation.playbackRate<0&&n<=0)?"finished":"running"}get rangeStart(){var e;return((e=c.get(this).animationRange)==null?void 0:e.start)??"normal"}set rangeStart(e){const n=c.get(this);if(!n.timeline)return n.animation.rangeStart=e;if(n.timeline instanceof y){const i=n.animationRange;i.start=se(n.timeline,e,"start"),re(n),E(n)}}get rangeEnd(){var e;return((e=c.get(this).animationRange)==null?void 0:e.end)??"normal"}set rangeEnd(e){const n=c.get(this);if(!n.timeline)return n.animation.rangeEnd=e;if(n.timeline instanceof y){const i=n.animationRange;i.end=se(n.timeline,e,"end"),re(n),E(n)}}get replaceState(){return c.get(this).animation.pending}get pending(){const e=c.get(this);return e.timeline?!!e.readyPromise&&e.readyPromise.state=="pending":e.animation.pending}finish(){const e=c.get(this);if(!e.timeline){e.animation.finish();return}const n=W(e),i=P(e);if(n==0)throw new DOMException("Cannot finish Animation with a playbackRate of 0.","InvalidStateError");if(n>0&&i==1/0)throw new DOMException("Cannot finish Animation with an infinite target effect end.","InvalidStateError");C(e);const r=n<0?0:i;this.currentTime=I(e,r);const o=h(e,e.timeline.currentTime);e.startTime===null&&o!==null&&(e.startTime=o-r/e.animation.playbackRate),e.pendingTask=="pause"&&e.startTime!==null&&(e.holdTime=null,e.pendingTask=null,e.readyPromise.resolve(this)),e.pendingTask=="play"&&e.startTime!==null&&(e.pendingTask=null,e.readyPromise.resolve(this)),k(e,!0,!0)}play(){const e=c.get(this);if(!e.timeline){e.animation.play();return}Se(e)}pause(){const e=c.get(this);if(!e.timeline){e.animation.pause();return}this.playState!="paused"&&(e.animation.currentTime===null&&(e.autoAlignStartTime=!0),e.pendingTask=="play"?e.pendingTask=null:e.readyPromise=null,e.readyPromise||$(e),e.pendingTask="pause",we(e.timeline,e.animation,Ce.bind(e.proxy)))}reverse(){const e=c.get(this),n=W(e),i=h(e,this.currentTime),r=P(e)==1/0,o=n!=0&&(n<0||i>0||!r);if(!e.timeline||!o){o&&(e.pendingPlaybackRate=-W(e)),e.animation.reverse();return}if(e.timeline.phase=="inactive")throw new DOMException("Cannot reverse an animation with no active timeline","InvalidStateError");this.updatePlaybackRate(-n),Se(e)}updatePlaybackRate(e){const n=c.get(this);if(n.pendingPlaybackRate=e,!n.timeline){n.animation.updatePlaybackRate(e);return}const i=this.playState;if(!(n.readyPromise&&n.readyPromise.state=="pending"))switch(i){case"idle":case"paused":C(n);break;case"finished":const r=h(n,n.timeline.currentTime),o=r!==null?(r-n.startTime)*n.animation.playbackRate:null;e==0?n.startTime=r:n.startTime=r!=null&&o!=null?(r-o)/e:null,C(n),k(n,!1,!1),E(n);break;default:Se(n)}}persist(){c.get(this).animation.persist()}get id(){return c.get(this).animation.id}set id(e){c.get(this).animation.id=e}cancel(){const e=c.get(this);if(!e.timeline){e.animation.cancel();return}this.playState!="idle"&&(yt(e),e.finishedPromise&&e.finishedPromise.state=="pending"&&e.finishedPromise.reject(un()),e.finishedPromise=new L,e.animation.cancel()),e.startTime=null,e.holdTime=null,de(e.timeline,e.animation)}get onfinish(){return c.get(this).animation.onfinish}set onfinish(e){c.get(this).animation.onfinish=e}get oncancel(){return c.get(this).animation.oncancel}set oncancel(e){c.get(this).animation.oncancel=e}get onremove(){return c.get(this).animation.onremove}set onremove(e){c.get(this).animation.onremove=e}get finished(){const e=c.get(this);return e.timeline?(e.finishedPromise||(e.finishedPromise=new L),e.finishedPromise.promise):e.animation.finished}get ready(){const e=c.get(this);return e.timeline?(e.readyPromise||(e.readyPromise=new L,e.readyPromise.resolve(this)),e.readyPromise.promise):e.animation.ready}addEventListener(e,n,i){c.get(this).animation.addEventListener(e,n,i)}removeEventListener(e,n,i){c.get(this).animation.removeEventListener(e,n,i)}dispatchEvent(e){c.get(this).animation.dispatchEvent(e)}}function Ct(t,e){const n=e.timeline;n instanceof y&&delete e.timeline;const i=ht.apply(this,[t,e]),r=new Sn(i,n);if(n instanceof y){i.pause();const o=c.get(r);o.animationRange={start:se(n,e.rangeStart,"start"),end:se(n,e.rangeEnd,"end")},r.play()}return r}function yn(t){for(let e=0;e<t.length;++e){let n=hn.get(t[e]);n&&(t[e]=n)}return t}function bt(t){let e=pt.apply(this,[t]);return yn(e)}function kt(t){let e=mt.apply(this,[t]);return yn(e)}function Pt(){if(!Reflect.defineProperty(window,"ScrollTimeline",{value:y}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(window,"ViewTimeline",{value:Q}))throw Error("Error installing ViewTimeline polyfill: could not attach ViewTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:Ct}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element");if(!Reflect.defineProperty(window,"Animation",{value:Sn}))throw Error("Error installing Animation constructor.");if(!Reflect.defineProperty(Element.prototype,"getAnimations",{value:bt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to DOM Element");if(!Reflect.defineProperty(document,"getAnimations",{value:kt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to document")}Pt();
