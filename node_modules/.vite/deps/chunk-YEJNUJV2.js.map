{
  "version": 3,
  "sources": ["../../@webstudio-is/react-sdk/lib/runtime.js"],
  "sourcesContent": ["// src/context.tsx\nimport { createContext, useContext, useMemo } from \"react\";\nimport {\n  createJsonStringifyProxy,\n  isPlainObject\n} from \"@webstudio-is/sdk/runtime\";\nvar ReactSdkContext = createContext({\n  assetBaseUrl: \"/\",\n  imageLoader: ({ src }) => src,\n  resources: {},\n  breakpoints: [],\n  onError: (error) => {\n    console.error(error);\n  }\n});\nvar useResource = (name) => {\n  const { resources } = useContext(ReactSdkContext);\n  const resource = resources[name];\n  const resourceMemozied = useMemo(\n    () => isPlainObject(resource) ? createJsonStringifyProxy(resource) : resource,\n    [resource]\n  );\n  return resourceMemozied;\n};\n\n// src/hook.ts\nvar getClosestInstance = (instancePath, currentInstance, closestComponent) => {\n  let matched = false;\n  for (const instance of instancePath) {\n    if (currentInstance === instance) {\n      matched = true;\n    }\n    if (matched && instance.component === closestComponent) {\n      return instance;\n    }\n  }\n};\n\n// src/variable-state.tsx\nimport { useState, useMemo as useMemo2 } from \"react\";\nimport {\n  createJsonStringifyProxy as createJsonStringifyProxy2,\n  isPlainObject as isPlainObject2\n} from \"@webstudio-is/sdk/runtime\";\nvar useVariableState = (initialState) => {\n  const [state, setState] = useState(initialState);\n  const value = useMemo2(\n    () => isPlainObject2(state) ? createJsonStringifyProxy2(state) : state,\n    [state]\n  );\n  return [value, setState];\n};\n\n// src/page-settings-meta.tsx\nimport { useEffect, useState as useState2 } from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar isElementRenderedWithReact = (element) => {\n  return Object.keys(element).some((key) => key.startsWith(\"__react\"));\n};\nvar isServer = typeof window === \"undefined\";\nvar Meta = (props) => {\n  const [localProps, setLocalProps] = useState2();\n  useEffect(() => {\n    const selector = `meta[${props.name ? `name=\"${props.name}\"` : `property=\"${props.property}\"`}]`;\n    let allMetas = document.querySelectorAll(selector);\n    for (const meta of allMetas) {\n      if (!isElementRenderedWithReact(meta)) {\n        meta.remove();\n      }\n    }\n    allMetas = document.querySelectorAll(selector);\n    if (allMetas.length === 0) {\n      setLocalProps(props);\n    }\n  }, [props]);\n  if (isServer) {\n    return /* @__PURE__ */ jsx(\"meta\", { ...props });\n  }\n  if (localProps === void 0) {\n    return;\n  }\n  return /* @__PURE__ */ jsx(\"meta\", { ...localProps });\n};\nvar PageSettingsMeta = ({\n  url,\n  host,\n  siteName,\n  pageMeta,\n  imageLoader,\n  assetBaseUrl\n}) => {\n  const metas = [];\n  if (url !== void 0) {\n    metas.push({\n      property: \"og:url\",\n      content: url\n    });\n  }\n  if (pageMeta.title) {\n    metas.push({\n      property: \"og:title\",\n      content: pageMeta.title\n    });\n  }\n  metas.push({ property: \"og:type\", content: \"website\" });\n  if (siteName) {\n    metas.push({\n      property: \"og:site_name\",\n      content: siteName\n    });\n  }\n  if (pageMeta.excludePageFromSearch) {\n    metas.push({\n      name: \"robots\",\n      content: \"noindex, nofollow\"\n    });\n  }\n  if (pageMeta.description) {\n    metas.push({\n      name: \"description\",\n      content: pageMeta.description\n    });\n    metas.push({\n      property: \"og:description\",\n      content: pageMeta.description\n    });\n  }\n  if (pageMeta.socialImageAssetName) {\n    metas.push({\n      property: \"og:image\",\n      content: `https://${host}${imageLoader({\n        src: `${assetBaseUrl}${pageMeta.socialImageAssetName}`,\n        // Do not transform social image (not enough information do we need to do this)\n        format: \"raw\"\n      })}`\n    });\n  } else if (pageMeta.socialImageUrl) {\n    metas.push({\n      property: \"og:image\",\n      content: pageMeta.socialImageUrl\n    });\n  }\n  metas.push(...pageMeta.custom);\n  const isTwitterCardSizeDefined = pageMeta.custom.some(\n    (meta) => meta.property === \"twitter:card\"\n  );\n  if ((pageMeta.socialImageAssetName !== void 0 || pageMeta.socialImageUrl !== void 0) && isTwitterCardSizeDefined === false) {\n    metas.push({ property: \"twitter:card\", content: \"summary_large_image\" });\n  }\n  return metas.map((meta, index) => /* @__PURE__ */ jsx(Meta, { ...meta }, index));\n};\n\n// src/page-settings-title.tsx\nimport { useEffect as useEffect2, useState as useState3 } from \"react\";\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar isServer2 = typeof window === \"undefined\";\nvar PageSettingsTitle = (props) => {\n  const [localProps, setLocalProps] = useState3();\n  useEffect2(() => {\n    const selector = `head > title`;\n    let allTitles = document.querySelectorAll(selector);\n    for (const meta of allTitles) {\n      if (!isElementRenderedWithReact(meta)) {\n        meta.remove();\n      }\n    }\n    allTitles = document.querySelectorAll(selector);\n    if (allTitles.length === 0) {\n      setLocalProps(props);\n    }\n  }, [props]);\n  if (isServer2) {\n    return /* @__PURE__ */ jsx2(\"title\", { ...props });\n  }\n  if (localProps === void 0) {\n    return;\n  }\n  return /* @__PURE__ */ jsx2(\"title\", { ...localProps });\n};\n\n// src/page-settings-canonical-link.tsx\nimport { useEffect as useEffect3, useState as useState4 } from \"react\";\nimport { jsx as jsx3 } from \"react/jsx-runtime\";\nvar isServer3 = typeof window === \"undefined\";\nvar PageSettingsCanonicalLink = (props) => {\n  const [localProps, setLocalProps] = useState4();\n  useEffect3(() => {\n    const selector = `head > link[rel=\"canonical\"]`;\n    let allLinks = document.querySelectorAll(selector);\n    for (const meta of allLinks) {\n      if (!isElementRenderedWithReact(meta)) {\n        meta.remove();\n      }\n    }\n    allLinks = document.querySelectorAll(selector);\n    if (allLinks.length === 0) {\n      setLocalProps(props);\n    }\n  }, [props]);\n  if (isServer3) {\n    return /* @__PURE__ */ jsx3(\"link\", { rel: \"canonical\", ...props });\n  }\n  if (localProps === void 0) {\n    return;\n  }\n  return /* @__PURE__ */ jsx3(\"link\", { rel: \"canonical\", ...localProps });\n};\n\n// src/runtime.ts\nvar xmlNodeTagSuffix = \"-ws-xml-node-fb77f896-8e96-40b9-b8f8-90a4e70d724a\";\nexport {\n  PageSettingsCanonicalLink,\n  PageSettingsMeta,\n  PageSettingsTitle,\n  ReactSdkContext,\n  getClosestInstance,\n  useResource,\n  useVariableState,\n  xmlNodeTagSuffix\n};\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "import_jsx_runtime", "useMemo2", "useState2", "useState3", "useEffect2", "jsx2", "useState4", "useEffect3", "jsx3"]
}
