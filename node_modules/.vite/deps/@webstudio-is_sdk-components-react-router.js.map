{
  "version": 3,
  "sources": ["../../@webstudio-is/sdk-components-react-router/lib/components.js"],
  "sourcesContent": ["// src/body.tsx\nimport { forwardRef } from \"react\";\nimport { Scripts, ScrollRestoration } from \"react-router\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar Body = forwardRef(\n  ({ children, ...props }, ref) => /* @__PURE__ */ jsxs(\"body\", { ...props, ref, children: [\n    children,\n    /* @__PURE__ */ jsx(Scripts, {}),\n    /* @__PURE__ */ jsx(ScrollRestoration, {})\n  ] })\n);\nBody.displayName = \"Body\";\n\n// src/link.tsx\nimport { forwardRef as forwardRef2, useContext } from \"react\";\nimport { NavLink as RemixLink } from \"react-router\";\nimport { ReactSdkContext } from \"@webstudio-is/react-sdk/runtime\";\nimport { Link as BaseLink } from \"@webstudio-is/sdk-components-react\";\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar Link = forwardRef2((props, ref) => {\n  const { assetBaseUrl } = useContext(ReactSdkContext);\n  const href = String(props.href ?? \"\");\n  if (\n    // remix appends ?index in runtime but not in ssr\n    href === \"\" || href.startsWith(\"?\") || href.startsWith(\"/\") && href.startsWith(assetBaseUrl) === false\n  ) {\n    return /* @__PURE__ */ jsx2(RemixLink, { ...props, to: href, ref, end: true });\n  }\n  const { prefetch, reloadDocument, replace, preventScrollReset, ...rest } = props;\n  return /* @__PURE__ */ jsx2(BaseLink, { ...rest, ref });\n});\nLink.displayName = BaseLink.displayName;\n\n// src/webhook-form.tsx\nimport {\n  forwardRef as forwardRef3,\n  useRef,\n  useEffect\n} from \"react\";\nimport { useFetcher } from \"react-router\";\nimport { formIdFieldName, formBotFieldName } from \"@webstudio-is/sdk/runtime\";\nimport { jsx as jsx3, jsxs as jsxs2 } from \"react/jsx-runtime\";\nvar useOnFetchEnd = (fetcher, handler) => {\n  const latestHandler = useRef(handler);\n  latestHandler.current = handler;\n  const prevFetcher = useRef(fetcher);\n  useEffect(() => {\n    if (prevFetcher.current.state !== fetcher.state && fetcher.state === \"idle\" && fetcher.data !== void 0) {\n      latestHandler.current(fetcher.data);\n    }\n    prevFetcher.current = fetcher;\n  }, [fetcher]);\n};\nvar gcd = (a, b) => b === 0 ? a : gcd(b, a % b);\nvar getAspectRatioString = (width, height) => {\n  const r = gcd(width, height);\n  const aspectRatio = `${width / r}/${height / r}`;\n  return aspectRatio;\n};\nvar isJSDom = () => {\n  if (typeof matchMedia === \"undefined\") {\n    return true;\n  }\n  const { width, height } = screen;\n  const deviceAspectRatio = getAspectRatioString(width, height);\n  const matchAspectRatio = matchMedia(\n    `(device-aspect-ratio: ${deviceAspectRatio})`\n  ).matches;\n  const matchWidthHeight = matchMedia(\n    `(device-width: ${width}px) and (device-height: ${height}px)`\n  ).matches;\n  const matchWidthHeightFail = matchMedia(\n    `(device-width: ${width - 1}px) and (device-height: ${height}px)`\n  ).matches;\n  const matchLight = matchMedia(\"(prefers-color-scheme: light)\").matches;\n  const matchDark = matchMedia(\"(prefers-color-scheme: dark)\").matches;\n  const hasMatchMedia = matchAspectRatio && matchWidthHeight && !matchWidthHeightFail && matchLight !== matchDark;\n  return hasMatchMedia === false;\n};\nvar WebhookForm = forwardRef3(\n  ({ children, action, method, state = \"initial\", onStateChange, ...rest }, ref) => {\n    const fetcher = useFetcher();\n    useOnFetchEnd(fetcher, (data) => {\n      const state2 = data?.success === true ? \"success\" : \"error\";\n      onStateChange?.(state2);\n    });\n    const handleSubmitAndAddHiddenJsField = (event) => {\n      const hiddenInput = document.createElement(\"input\");\n      hiddenInput.type = \"hidden\";\n      hiddenInput.name = formBotFieldName;\n      hiddenInput.value = isJSDom() ? \"jsdom\" : Date.now().toString(16);\n      event.currentTarget.appendChild(hiddenInput);\n    };\n    return /* @__PURE__ */ jsxs2(\n      fetcher.Form,\n      {\n        ...rest,\n        method: \"post\",\n        \"data-state\": state,\n        ref,\n        onSubmit: handleSubmitAndAddHiddenJsField,\n        children: [\n          /* @__PURE__ */ jsx3(\n            \"input\",\n            {\n              type: \"hidden\",\n              name: formIdFieldName,\n              value: action?.toString()\n            }\n          ),\n          children\n        ]\n      }\n    );\n  }\n);\nWebhookForm.displayName = \"WebhookForm\";\n\n// src/remix-form.tsx\nimport { forwardRef as forwardRef4 } from \"react\";\nimport { Form } from \"react-router\";\nimport { jsx as jsx4 } from \"react/jsx-runtime\";\nvar RemixForm = forwardRef4(({ action, method, ...props }, ref) => {\n  if (method === \"dialog\") {\n    return /* @__PURE__ */ jsx4(\"form\", { ...props, ref });\n  }\n  if (action === void 0 || action === \"\" || typeof action === \"string\" && action?.startsWith(\"/\")) {\n    return /* @__PURE__ */ jsx4(\n      Form,\n      {\n        action,\n        method,\n        ...props,\n        ref,\n        preventScrollReset: action === void 0 || action === \"\"\n      }\n    );\n  }\n  return /* @__PURE__ */ jsx4(\"form\", { ...props, ref });\n});\nRemixForm.displayName = \"Form\";\nexport {\n  Body,\n  WebhookForm as Form,\n  Link,\n  RemixForm,\n  Link as RichTextLink\n};\n"],
  "mappings": "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",
  "names": ["import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "forwardRef2", "jsx2", "a", "forwardRef3", "jsxs2", "jsx3", "forwardRef4", "jsx4"]
}
